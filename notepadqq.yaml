name: notepadqq
buildsystem: qmake
config-opts:
  - QMAKE_STRIP=
  - DEFINES+=USE_DBUS
  - LRELEASE=lrelease
build-options:
  env:
    QMAKEPATH: "/app/lib"
sources:
  - type: git
    url: https://github.com/notepadqq/notepadqq.git
    commit: 857a0369df590effc999a2fe6a6274321eeafaca
  # Auto-fill paths for node & npm
  - type: patch
    path: notepadqq-1.9.99-paths.patch
  # Disable editing nodejs options in Preferences
  - type: patch
    path: notepadqq-1.4.8-preferences.patch
  # Improve icon handling
  # https://github.com/notepadqq/notepadqq/pull/908
  - type: patch
    path: notepadqq-1.9.99-icons-xdg.patch
    use-git: true
post-install:
  - install -p -D -m 0644 *.md -t "${FLATPAK_DEST}/share/doc/notepadqq/";
  - install -p -D -m 0644 "COPYING" -t "${FLATPAK_DEST}/share/licenses/notepadqq/";
modules:
  - nodejs.yaml
  - uchardet.yaml
  - fonts.yaml
